<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="styles.css">
        <title>TicTacToe</title>
        <script>
        </script>
    </head>
    <body>
        <h1>Tic-Tac-Toe</h1>
        <p id="playerTurn">X turn to play</p>
        <div id="board">
            <div id="cellRow1">
            </div>
            <div id="cellRow2">
            </div>
            <div id="cellRow3">
            </div>
        </div>
        <div class="container">
            <div class="center">
              <button id="clearButton"></button>
            </div>
          </div>
    
        <script>
            document.addEventListener("DOMContentLoaded", function() {

                const row1 = document.getElementById("cellRow1")
                const row2 = document.getElementById("cellRow2")
                const row3 = document.getElementById("cellRow3")

                boardCells = []

                function move(cell) {
                    if(cell.textContent == "") {
                        cell.textContent = currPlayer
                        if(isOver()) {
                            alert("The GAME IS OVER AND PLAYER " + currPlayer + " HAS WON!")
                            clearBoard()
                        }
                        if (isStalemate()) {
                            alert("THE GAME HAS ENDED IN A DRAW")
                            clearBoard()
                        }
                        currPlayer = changeTurn(currPlayer)
                    } else {
                        alert("please choose an empty box!")
                    }
                }
                function changeTurn(currPlayer) {
                    if (currPlayer == 'X') {
                        currPlayer = 'O'
                    } else {
                        currPlayer = 'X'
                    }
                    p = document.getElementById("playerTurn")
                    turnString = currPlayer + " turn to play"
                    p.innerHTML = turnString
                    return currPlayer
                }

                for(i=0;i<3;i++) {
                    const newDiv = document.createElement("div")
                    newDiv.className = "boardCell"
                    boardCells.push(newDiv)
                    newDiv.addEventListener("click", function() {
                        newDiv.isclicked = true
                        move(this)
                    })
                    row1.appendChild(newDiv)
                }
                for(i=3;i<6;i++) {
                    const newDiv = document.createElement("div")
                    newDiv.className = "boardCell"
                    boardCells.push(newDiv)
                    newDiv.addEventListener("click", function() {
                        newDiv.isclicked = true
                        move(this)
                    })
                    row2.appendChild(newDiv)
                }
                for(i=6;i<9;i++) {
                    const newDiv = document.createElement("div")
                    newDiv.className = "boardCell"
                    boardCells.push(newDiv)
                    newDiv.addEventListener("click", function() {
                        newDiv.isclicked = true
                        move(this)
                    })
                    row3.appendChild(newDiv)
                }
            })
            currPlayer = 'X'
            game_over = false

            function isOver() {
                if((boardCells[4].isclicked && (boardCells[4].textContent == boardCells[0].textContent) && (boardCells[4].textContent == boardCells[8].textContent))
                || (boardCells[4].isclicked && (boardCells[4].textContent == boardCells[2].textContent) && (boardCells[4].textContent == boardCells[6].textContent))
                || (boardCells[4].isclicked && (boardCells[4].textContent == boardCells[1].textContent) && (boardCells[4].textContent == boardCells[7].textContent))
                || (boardCells[4].isclicked && (boardCells[4].textContent == boardCells[3].textContent) && (boardCells[4].textContent == boardCells[5].textContent))
                || (boardCells[0].isclicked && (boardCells[0].textContent == boardCells[1].textContent) && (boardCells[0].textContent == boardCells[2].textContent))
                || (boardCells[0].isclicked && (boardCells[0].textContent == boardCells[3].textContent) && (boardCells[0].textContent == boardCells[6].textContent))
                || (boardCells[8].isclicked && (boardCells[8].textContent == boardCells[6].textContent) && (boardCells[8].textContent == boardCells[7].textContent))
                || (boardCells[8].isclicked && (boardCells[8].textContent == boardCells[5].textContent) && (boardCells[8].textContent == boardCells[2].textContent))) {
                    return true
            } else {
                return false
            }
            }

            function clearBoard() {
                x = document.getElementById("clearButton")
                x.innerHTML = "Clear Board?"
                x.addEventListener("click", function() {
                    for(i = 0; i < 9; i++) {
                        boardCells[i].isclicked = false
                        boardCells[i].textContent = ""
                    }
                })
            }
                        
            function isStalemate() {
                stalemate = true
                for (i=0; i < 9; i++) {
                    if(boardCells[i].textContent == "") {
                        stalemate = false
                    }
                }
                return stalemate
            }
                        
         </script>
     </body>
 </html>